<!DOCTYPE html>
<!--
==============================================================================
           "GitHub HTML5 Pandoc Template" v2.1 — by Tristano Ajmone
==============================================================================
Copyright © Tristano Ajmone, 2017, MIT License (MIT). Project's home:

- https://github.com/tajmone/pandoc-goodies

The CSS in this template reuses source code taken from the following projects:

- GitHub Markdown CSS: Copyright © Sindre Sorhus, MIT License (MIT):
  https://github.com/sindresorhus/github-markdown-css

- Primer CSS: Copyright © 2016-2017 GitHub Inc., MIT License (MIT):
  http://primercss.io/

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The MIT License

Copyright (c) Tristano Ajmone, 2017 (github.com/tajmone/pandoc-goodies)
Copyright (c) Sindre Sorhus <sindresorhus@gmail.com> (sindresorhus.com)
Copyright (c) 2017 GitHub Inc.

"GitHub Pandoc HTML5 Template" is Copyright (c) Tristano Ajmone, 2017, released
under the MIT License (MIT); it contains readaptations of substantial portions
of the following third party softwares:

(1) "GitHub Markdown CSS", Copyright (c) Sindre Sorhus, MIT License (MIT).
(2) "Primer CSS", Copyright (c) 2016 GitHub Inc., MIT License (MIT).

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
==============================================================================-->
<html>
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>gcy: README</title>
  <style type="text/css">
@charset "UTF-8";.markdown-body{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;color:#24292e;font-family:-apple-system,system-ui,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";font-size:16px;line-height:1.5;word-wrap:break-word;box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto;padding:45px}.markdown-body a{color:#0366d6;background-color:transparent;text-decoration:none;-webkit-text-decoration-skip:objects}.markdown-body a:active,.markdown-body a:hover{outline-width:0}.markdown-body a:hover{text-decoration:underline}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body strong{font-weight:600}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.markdown-body h1{font-size:2em;margin:.67em 0;padding-bottom:.3em;border-bottom:1px solid #eaecef}.markdown-body h2{padding-bottom:.3em;font-size:1.5em;border-bottom:1px solid #eaecef}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{font-size:.85em;color:#6a737d}.markdown-body img{border-style:none}.markdown-body svg:not(:root){overflow:hidden}.markdown-body hr{box-sizing:content-box;height:.25em;margin:24px 0;padding:0;overflow:hidden;background-color:#e1e4e8;border:0}.markdown-body hr::before{display:table;content:""}.markdown-body hr::after{display:table;clear:both;content:""}.markdown-body input{margin:0;overflow:visible;font:inherit;font-family:inherit;font-size:inherit;line-height:inherit}.markdown-body [type=checkbox]{box-sizing:border-box;padding:0}.markdown-body *{box-sizing:border-box}.markdown-body blockquote{margin:0}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol ol,.markdown-body ul ol{list-style-type:lower-roman}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:0;margin-bottom:0}.markdown-body ol ol ol,.markdown-body ol ul ol,.markdown-body ul ol ol,.markdown-body ul ul ol{list-style-type:lower-alpha}.markdown-body li>p{margin-top:16px}.markdown-body li+li{margin-top:.25em}.markdown-body dd{margin-left:0}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:600}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body code{font-family:SFMono-Regular,Consolas,"Liberation Mono",Menlo,Courier,monospace}.markdown-body pre{font:12px SFMono-Regular,Consolas,"Liberation Mono",Menlo,Courier,monospace;word-wrap:normal}.markdown-body blockquote,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-top:0;margin-bottom:16px}.markdown-body blockquote{padding:0 1em;color:#6a737d;border-left:.25em solid #dfe2e5}.markdown-body blockquote>:first-child{margin-top:0}.markdown-body blockquote>:last-child{margin-bottom:0}.markdown-body table{display:block;width:100%;overflow:auto;border-spacing:0;border-collapse:collapse}.markdown-body table th{font-weight:600}.markdown-body table td,.markdown-body table th{padding:6px 13px;border:1px solid #dfe2e5}.markdown-body table tr{background-color:#fff;border-top:1px solid #c6cbd1}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}.markdown-body img{max-width:100%;box-sizing:content-box;background-color:#fff}.markdown-body code{padding:.2em 0;margin:0;font-size:85%;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body code::after,.markdown-body code::before{letter-spacing:-.2em;content:" "}.markdown-body pre>code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:0 0;border:0}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f6f8fa;border-radius:3px}.markdown-body pre code{display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}.markdown-body pre code::after,.markdown-body pre code::before{content:normal}.markdown-body .full-commit .btn-outline:not(:disabled):hover{color:#005cc5;border-color:#005cc5}.markdown-body kbd{box-shadow:inset 0 -1px 0 #959da5;display:inline-block;padding:3px 5px;font:11px/10px SFMono-Regular,Consolas,"Liberation Mono",Menlo,Courier,monospace;color:#444d56;vertical-align:middle;background-color:#fcfcfc;border:1px solid #c6cbd1;border-bottom-color:#959da5;border-radius:3px;box-shadow:inset 0 -1px 0 #959da5}.markdown-body :checked+.radio-label{position:relative;z-index:1;border-color:#0366d6}.markdown-body .task-list-item{list-style-type:none}.markdown-body .task-list-item+.task-list-item{margin-top:3px}.markdown-body .task-list-item input{margin:0 .2em .25em -1.6em;vertical-align:middle}.markdown-body::before{display:table;content:""}.markdown-body::after{display:table;clear:both;content:""}.markdown-body>:first-child{margin-top:0!important}.markdown-body>:last-child{margin-bottom:0!important}.Alert,.Error,.Note,.Success,.Warning{padding:11px;margin-bottom:24px;border-style:solid;border-width:1px;border-radius:4px}.Alert p,.Error p,.Note p,.Success p,.Warning p{margin-top:0}.Alert p:last-child,.Error p:last-child,.Note p:last-child,.Success p:last-child,.Warning p:last-child{margin-bottom:0}.Alert{color:#246;background-color:#e2eef9;border-color:#bac6d3}.Warning{color:#4c4a42;background-color:#fff9ea;border-color:#dfd8c2}.Error{color:#911;background-color:#fcdede;border-color:#d2b2b2}.Success{color:#22662c;background-color:#e2f9e5;border-color:#bad3be}.Note{color:#2f363d;background-color:#f6f8fa;border-color:#d5d8da}.Alert h1,.Alert h2,.Alert h3,.Alert h4,.Alert h5,.Alert h6{color:#246;margin-bottom:0}.Warning h1,.Warning h2,.Warning h3,.Warning h4,.Warning h5,.Warning h6{color:#4c4a42;margin-bottom:0}.Error h1,.Error h2,.Error h3,.Error h4,.Error h5,.Error h6{color:#911;margin-bottom:0}.Success h1,.Success h2,.Success h3,.Success h4,.Success h5,.Success h6{color:#22662c;margin-bottom:0}.Note h1,.Note h2,.Note h3,.Note h4,.Note h5,.Note h6{color:#2f363d;margin-bottom:0}.Alert h1:first-child,.Alert h2:first-child,.Alert h3:first-child,.Alert h4:first-child,.Alert h5:first-child,.Alert h6:first-child,.Error h1:first-child,.Error h2:first-child,.Error h3:first-child,.Error h4:first-child,.Error h5:first-child,.Error h6:first-child,.Note h1:first-child,.Note h2:first-child,.Note h3:first-child,.Note h4:first-child,.Note h5:first-child,.Note h6:first-child,.Success h1:first-child,.Success h2:first-child,.Success h3:first-child,.Success h4:first-child,.Success h5:first-child,.Success h6:first-child,.Warning h1:first-child,.Warning h2:first-child,.Warning h3:first-child,.Warning h4:first-child,.Warning h5:first-child,.Warning h6:first-child{margin-top:0}h1.title,p.subtitle{text-align:center}h1.title.followed-by-subtitle{margin-bottom:0}p.subtitle{font-size:1.5em;font-weight:600;line-height:1.25;margin-top:0;margin-bottom:16px;padding-bottom:.3em}div.line-block{white-space:pre-line}
  </style>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<article class="markdown-body">
<h1 id="go-config-yourself">go-config-yourself</h1>
<p><a href="https://github.com/blinkhealth/go-config-yourself/actions?query=branch%3Amaster+event%3Apush"><img src="https://github.com/blinkhealth/go-config-yourself/workflows/Tests/badge.svg" alt="Test status" /></a>
<a href="https://coveralls.io/github/blinkhealth/go-config-yourself?branch=master"><img src="https://coveralls.io/repos/github/blinkhealth/go-config-yourself/badge.svg?branch=master" alt="Coverage Status" /></a></p>
<p>A secrets-management CLI tool and language-specific runtimes to deal with everyday application configuration right from your repository. <strong>go-config-yourself</strong> aims to simplify the management of secrets from your terminal and their use within application code. Configuration files are kept as human-readable as possible, so change management is easily achievable in any version-control system (like git).</p>
<p><code>go-config-yourself</code> comes with the following cryptographic providers that do the work of encrypting and decrypting secrets, along with managing the keys for it:</p>
<ul>
<li><a href="pkg/crypto/kms">AWS KMS</a></li>
<li><a href="pkg/crypto/gpg">GPG</a></li>
<li><a href="pkg/crypto/password">Password</a> (scrypt)</li>
</ul>
<p>This repository contains code and documentation for the <code>gcy</code> command-line tool. Packaged libraries to read secrets from these files are available for these languages:</p>
<ul>
<li><a href="pkg/file">Golang</a></li>
<li><a href="https://github.com/blinkhealth/config-yourself-javascript">Javascript + Typescript</a></li>
<li><a href="https://github.com/blinkhealth/config-yourself-python">Python</a></li>
</ul>
<hr />
<h1 id="gcy">gcy</h1>
<ul>
<li><a href="#installation">Installation</a></li>
<li><a href="#usage">Usage</a></li>
<li><a href="#config-files">Config files</a></li>
<li><a href="CONTRIBUTING.html">Developing go-config-yourself</a></li>
</ul>
<h1 id="installation">Installation</h1>
<h2 id="osx">OSX</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1"></a><span class="ex">brew</span> tap blinkhealth/opensource-formulas</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="ex">brew</span> install blinkhealth/opensource-formulas/go-config-yourself</span></code></pre></div>
<p><strong>Install the latest snapshot</strong>, uninstalling any current versions:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1"></a><span class="ex">brew</span> update <span class="kw">&amp;&amp;</span> <span class="ex">brew</span> uninstall --ignore-dependencies go-config-yourself</span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="ex">brew</span> install --HEAD blinkhealth/opensource-formulas/go-config-yourself</span></code></pre></div>
<p><strong>Update</strong> with:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1"></a><span class="ex">brew</span> update <span class="kw">&amp;&amp;</span> <span class="ex">brew</span> upgrade go-config-yourself</span></code></pre></div>
<h2 id="debianubuntu">Debian/Ubuntu</h2>
<div class="sourceCode" id="cb4"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1"></a><span class="va">last_release=</span><span class="st">&quot;https://api.github.com/repos/blinkhealth/go-config-yourself/releases/latest&quot;</span></span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="va">version=$(</span><span class="ex">curl</span> --silent <span class="st">&quot;</span><span class="va">$last_release</span><span class="st">&quot;</span> <span class="kw">|</span> <span class="fu">awk</span> -F<span class="st">&#39;&quot;&#39;</span> <span class="st">&#39;/tag_name/{print $4}&#39;</span> <span class="va">)</span></span>
<span id="cb4-3"><a href="#cb4-3"></a><span class="ex">curl</span> -vO https://github.com/blinkhealth/go-config-yourself/releases/download/<span class="va">$version</span>/gcy-linux-amd64.deb</span>
<span id="cb4-4"><a href="#cb4-4"></a><span class="ex">apt</span> install ./gcy-linux-amd64.deb</span></code></pre></div>
<h2 id="other-linux-distros">Other Linux distros:</h2>
<div class="sourceCode" id="cb5"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1"></a><span class="va">last_release=</span><span class="st">&quot;https://api.github.com/repos/blinkhealth/go-config-yourself/releases/latest&quot;</span></span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="va">version=$(</span><span class="ex">curl</span> --silent <span class="st">&quot;</span><span class="va">$last_release</span><span class="st">&quot;</span> <span class="kw">|</span> <span class="fu">awk</span> -F<span class="st">&#39;&quot;&#39;</span> <span class="st">&#39;/tag_name/{print $4}&#39;</span> <span class="va">)</span></span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="ex">curl</span> -vO https://github.com/blinkhealth/go-config-yourself/releases/download/<span class="va">$version</span>/gcy-linux-amd64.tar.gz</span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="fu">tar</span> xfz gcy-linux-amd64.tar.gz</span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="fu">make</span> install</span></code></pre></div>
<hr />
<h1 id="usage">Usage</h1>
<p>The command line interface is a program named <code>gcy</code> with four main commands: <a href="#init"><code>init</code></a>, <a href="#set"><code>set</code></a>, <a href="#get"><code>get</code></a> and <a href="#rekey"><code>rekey</code></a>. Before diving in, here’s how to get some help:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1"></a><span class="co"># See the included reference manual</span></span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="ex">gcy</span> help</span>
<span id="cb6-3"><a href="#cb6-3"></a><span class="co"># or help for any command</span></span>
<span id="cb6-4"><a href="#cb6-4"></a><span class="ex">gcy</span> help init</span>
<span id="cb6-5"><a href="#cb6-5"></a><span class="co"># also a flag, so you don&#39;t even need to hit backspace</span></span>
<span id="cb6-6"><a href="#cb6-6"></a><span class="ex">gcy</span> init --provider kms --key some-long-arn --help</span>
<span id="cb6-7"><a href="#cb6-7"></a><span class="co"># see this exact page</span></span>
<span id="cb6-8"><a href="#cb6-8"></a><span class="fu">man</span> gcy</span>
<span id="cb6-9"><a href="#cb6-9"></a><span class="co"># or pages about providers</span></span>
<span id="cb6-10"><a href="#cb6-10"></a><span class="fu">man</span> gcy-password</span>
<span id="cb6-11"><a href="#cb6-11"></a><span class="co"># Show verbose output</span></span>
<span id="cb6-12"><a href="#cb6-12"></a><span class="ex">gcy</span> --verbose <span class="co"># ...rest of the command</span></span></code></pre></div>
<h2 id="init"><code>init</code></h2>
<div class="sourceCode" id="cb7"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1"></a><span class="ex">gcy</span> init [options] CONFIG_FILE</span></code></pre></div>
<p>Creates a YAML config file at <code>CONFIG_FILE</code>.</p>
<p>If needed, <code>gcy init</code> will query your provider for a list of keys to choose from when using the <code>aws</code> or <code>gpg</code> providers, and a password will be prompted for when using the <code>password</code> provider. <code>gcy init</code> will select the <code>aws</code> provider by default, and you can override it with the <code>--provider</code> flag.</p>
<p>See <code>gcy help config-file</code> for more information about <code>CONFIG_FILE</code>.</p>
<h3 id="options">Options:</h3>
<ul>
<li><code>--provider value</code>, <code>-p value</code>: The provider to encrypt values with (value is one of: <a href="pkg/crypto/kms">kms</a>, <a href="pkg/crypto/gpg">gpg</a>, <a href="pkg/crypto/password">password</a>)</li>
<li><code>--key value</code>: The AWS KMS key ARN to use.</li>
<li><code>--public-key value</code>: One gpg public key’s identity (fingerprint or email) to use as a recipient to encrypt this file’s data key. Pass multiple times for multiple recipients, or omit completely and <code>gcy</code> prompts you to select a key available to your gpg agent.</li>
<li><code>--password value</code>: A password to use for encryption and decryption. To prevent your shell from remembering the password in its history, start your command with a space: <code>[space]gcy ...</code>. Can be set via the environment variable: <code>CONFIG_PASSWORD</code>.</li>
<li><code>--skip-password-validation</code>: Skips password validation, potentially making encrypted secrets easier to crack.</li>
</ul>
<div class="sourceCode" id="cb8"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1"></a><span class="co"># For kms</span></span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="ex">gcy</span> init config/my-first-config.yml</span>
<span id="cb8-3"><a href="#cb8-3"></a><span class="co"># INFO Creating config at config/my-first-config.yml</span></span>
<span id="cb8-4"><a href="#cb8-4"></a><span class="co"># Use the arrow keys to navigate: ↓ ↑ → ←  and / toggles search</span></span>
<span id="cb8-5"><a href="#cb8-5"></a><span class="co"># ? Select a key to continue:</span></span>
<span id="cb8-6"><a href="#cb8-6"></a><span class="co">#   ▸ arn:aws:kms:us-east-1:an-account:alias/an-alias</span></span>
<span id="cb8-7"><a href="#cb8-7"></a><span class="co">#     arn:aws:kms:us-east-1:an-account:alias/another-alias</span></span>
<span id="cb8-8"><a href="#cb8-8"></a><span class="co">#     ....</span></span>
<span id="cb8-9"><a href="#cb8-9"></a><span class="co">#     arn:aws:kms:us-east-1:an-account:alias/and-so-on</span></span>
<span id="cb8-10"><a href="#cb8-10"></a><span class="co"># ↓   arn:aws:kms:us-east-1:an-account:alias/and-so-forth</span></span>
<span id="cb8-11"><a href="#cb8-11"></a></span>
<span id="cb8-12"><a href="#cb8-12"></a><span class="co"># or specify the key if you know it</span></span>
<span id="cb8-13"><a href="#cb8-13"></a><span class="ex">gcy</span> init config/my-first-config.yml --provider kms --key arn:aws:kms:an-aws-region:an-account:alias/an-alias</span>
<span id="cb8-14"><a href="#cb8-14"></a></span>
<span id="cb8-15"><a href="#cb8-15"></a><span class="fu">cat</span> config/my-first-config.yml</span></code></pre></div>
<p>Outputs:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb9-1"><a href="#cb9-1"></a><span class="fu">crypto</span><span class="kw">:</span></span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="at">  </span><span class="fu">key</span><span class="kw">:</span><span class="at"> arn:aws:kms:an-aws-region:an-account:alias/an-alias</span></span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="at">  </span><span class="fu">provider</span><span class="kw">:</span><span class="at"> kms</span></span></code></pre></div>
<h2 id="set"><code>set</code></h2>
<div class="sourceCode" id="cb10"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1"></a><span class="ex">gcy</span> set [options] CONFIG_FILE KEYPATH</span></code></pre></div>
<p>Stores a value at <code>KEYPATH</code>, encrypting it by default, and saves it to <code>CONFIG_FILE</code>.</p>
<p><code>KEYPATH</code> is a dot-delimited path to values, see <code>gcy help keypath</code> for examples.</p>
<p><code>gcy set</code> prompts for input, unless a value is provided via <code>stdin</code> or the <code>--input-file</code> flag. Values will be interpreted with golang’s default JSON parser before storage, so for example the string <code>“true”</code> will be stored as the boolean <code>true</code>. Due to existing AWS KMS service limitations, <code>gcy set</code> will read up to 4096 bytes before exiting with an error and closing its input.</p>
<p>A properly configured <code>crypto</code> property must exist <code>CONFIG_FILE</code> for encryption to succeed, <code>gcy set</code> will exit with a non-zero status code otherwise. See <code>gcy help config-file</code> for more information about <code>CONFIG_FILE</code>.</p>
<p>If a <code>defaults</code> or <code>default</code> file with the same extension as <code>CONFIG_FILE</code> exists in the same directory, <code>gcy set</code> will add a nil value for <code>KEYPATH</code> in said file.</p>
<h3 id="options-1">Options</h3>
<ul>
<li><code>-p|--plain-text</code>: Store the value as plain text with no encryption</li>
<li><code>-i|--input-file PATH</code>: Use the specified file path instead of prompting for input from <code>stdin</code></li>
</ul>
<div class="sourceCode" id="cb11"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1"></a><span class="ex">gcy</span> set --plain-text config-up-there.yml someInt <span class="co"># user inputs &quot;1&quot;</span></span>
<span id="cb11-2"><a href="#cb11-2"></a><span class="ex">gcy</span> set --plain-text config-up-there.yml someBool <span class="co"># &quot;true&quot;</span></span>
<span id="cb11-3"><a href="#cb11-3"></a><span class="ex">gcy</span> set --plain-text config-up-there.yml someList <span class="co"># &quot;[1,2,3]&quot;</span></span>
<span id="cb11-4"><a href="#cb11-4"></a><span class="ex">gcy</span> set --plain-text config-up-there.yml someList.1 <span class="co"># &quot;3&quot;</span></span>
<span id="cb11-5"><a href="#cb11-5"></a><span class="ex">gcy</span> set --plain-text config-up-there.yml someList.3 <span class="co"># &quot;7&quot;</span></span>
<span id="cb11-6"><a href="#cb11-6"></a><span class="ex">gcy</span> set --plain-text config-up-there.yml someString <span class="co"># &quot;hello i am a string&quot;</span></span>
<span id="cb11-7"><a href="#cb11-7"></a><span class="ex">gcy</span> set --plain-text config-up-there.yml nestedList.0.prop <span class="co"># &quot;true&quot;</span></span>
<span id="cb11-8"><a href="#cb11-8"></a><span class="ex">gcy</span> set --plain-text config-up-there.yml nestedList.1.prop <span class="co"># &quot;false&quot;</span></span>
<span id="cb11-9"><a href="#cb11-9"></a><span class="ex">gcy</span> set --plain-text config-up-there.yml some.nested.object <span class="co"># &quot;down here&quot;</span></span>
<span id="cb11-10"><a href="#cb11-10"></a><span class="ex">gcy</span> set --plain-text --input-file ~/.ssh/id_rsa config-up-there.yml someFile</span>
<span id="cb11-11"><a href="#cb11-11"></a><span class="ex">gcy</span> set config-up-there.yml someSecret</span>
<span id="cb11-12"><a href="#cb11-12"></a></span>
<span id="cb11-13"><a href="#cb11-13"></a><span class="co"># Please enter the value for &quot;someSecret&quot;: **************</span></span>
<span id="cb11-14"><a href="#cb11-14"></a></span>
<span id="cb11-15"><a href="#cb11-15"></a><span class="fu">cat</span> config-up-there.yml</span></code></pre></div>
<p>Outputs:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb12-1"><a href="#cb12-1"></a><span class="fu">nestedList</span><span class="kw">:</span></span>
<span id="cb12-2"><a href="#cb12-2"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">prop</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb12-3"><a href="#cb12-3"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">prop</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span>
<span id="cb12-4"><a href="#cb12-4"></a><span class="fu">some</span><span class="kw">:</span></span>
<span id="cb12-5"><a href="#cb12-5"></a><span class="at">  </span><span class="fu">nested</span><span class="kw">:</span></span>
<span id="cb12-6"><a href="#cb12-6"></a><span class="at">    </span><span class="fu">object</span><span class="kw">:</span><span class="at"> down here</span></span>
<span id="cb12-7"><a href="#cb12-7"></a><span class="at">    </span><span class="fu">secret</span><span class="kw">:</span></span>
<span id="cb12-8"><a href="#cb12-8"></a><span class="at">      </span><span class="fu">encrypted</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb12-9"><a href="#cb12-9"></a><span class="at">      </span><span class="fu">ciphertext</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;D34DB33fb4d455=&quot;</span></span>
<span id="cb12-10"><a href="#cb12-10"></a><span class="at">      </span><span class="fu">hash</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;ABDCDEF0987654321&quot;</span></span>
<span id="cb12-11"><a href="#cb12-11"></a><span class="fu">someInt</span><span class="kw">:</span><span class="at"> </span><span class="dv">1</span></span>
<span id="cb12-12"><a href="#cb12-12"></a><span class="fu">someBool</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb12-13"><a href="#cb12-13"></a><span class="fu">someFile</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb12-14"><a href="#cb12-14"></a>  -----BEGIN SOME KEY-----</span>
<span id="cb12-15"><a href="#cb12-15"></a>  ...</span>
<span id="cb12-16"><a href="#cb12-16"></a>  -----END SOME KEY-----</span>
<span id="cb12-17"><a href="#cb12-17"></a><span class="fu">someList</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="dv">1</span><span class="kw">,</span><span class="at"> </span><span class="dv">3</span><span class="kw">,</span><span class="at"> </span><span class="dv">3</span><span class="kw">,</span><span class="at"> </span><span class="dv">7</span><span class="kw">]</span></span>
<span id="cb12-18"><a href="#cb12-18"></a><span class="fu">someString</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;hello i am a string&quot;</span></span>
<span id="cb12-19"><a href="#cb12-19"></a><span class="fu">someSecret</span><span class="kw">:</span></span>
<span id="cb12-20"><a href="#cb12-20"></a><span class="at">  </span><span class="fu">encrypted</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb12-21"><a href="#cb12-21"></a><span class="at">  </span><span class="fu">ciphertext</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;D34DB33fb4d455=&quot;</span></span>
<span id="cb12-22"><a href="#cb12-22"></a><span class="at">  </span><span class="fu">hash</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;ABDCDEF0987654321&quot;</span></span></code></pre></div>
<h2 id="get"><code>get</code></h2>
<div class="sourceCode" id="cb13"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1"></a><span class="ex">gcy</span> get CONFIG_FILE KEYPATH</span></code></pre></div>
<p>Outputs the plain-text value for <code>KEYPATH</code> in <code>CONFIG_FILE</code>.</p>
<p><code>KEYPATH</code> refers to a dot-delimited path to values, see <code>gcy help keypath</code> for examples.</p>
<p>If the value at <code>KEYPATH</code> is a dictionary or a list, it will be encoded as JSON, with all of the encrypted values within decrypted. If no value <code>KEYPATH</code> exists, <code>gcy get</code> will fail with exit code 2.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1"></a><span class="ex">gcy</span> get config-up-there.yml some.nested.object</span>
<span id="cb14-2"><a href="#cb14-2"></a><span class="co"># Outputs:</span></span>
<span id="cb14-3"><a href="#cb14-3"></a><span class="co"># down here</span></span>
<span id="cb14-4"><a href="#cb14-4"></a></span>
<span id="cb14-5"><a href="#cb14-5"></a><span class="ex">gcy</span> get config-up-there.yml some</span></code></pre></div>
<p>Outputs:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb15-1"><a href="#cb15-1"></a><span class="fu">{</span></span>
<span id="cb15-2"><a href="#cb15-2"></a>  <span class="dt">&quot;nested&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb15-3"><a href="#cb15-3"></a>    <span class="dt">&quot;object&quot;</span><span class="fu">:</span> <span class="st">&quot;down here&quot;</span><span class="fu">,</span></span>
<span id="cb15-4"><a href="#cb15-4"></a>    <span class="dt">&quot;secret&quot;</span><span class="fu">:</span> <span class="st">&quot;plaintext value of some.nested.secret&quot;</span></span>
<span id="cb15-5"><a href="#cb15-5"></a>  <span class="fu">}</span></span>
<span id="cb15-6"><a href="#cb15-6"></a><span class="fu">}</span></span></code></pre></div>
<h2 id="rekey"><code>rekey</code></h2>
<div class="sourceCode" id="cb16"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1"></a><span class="ex">gcy</span> rekey [options] CONFIG_FILE</span></code></pre></div>
<p>Re-encrypts all the secret values with specified arguments in <code>CONFIG_FILE</code>.</p>
<p>By default, it will reuse the same provider for this operation, unless <code>--provider</code> is passed. If needed, <code>gcy rekey</code> will query your provider for a list of keys to choose from when using the <code>aws</code> or <code>gpg</code> providers, and a password will be prompted for when using the <code>password</code> provider.</p>
<h3 id="options-2">Options:</h3>
<ul>
<li><code>--provider value</code>, <code>-p value</code>: The provider to encrypt values with (value is one of: <a href="pkg/crypto/kms">kms</a>, <a href="pkg/crypto/gpg">gpg</a>, <a href="pkg/crypto/password">password</a>)</li>
<li><code>--key value</code>: The AWS KMS key ARN to use.</li>
<li><code>--public-key value</code>: One gpg public key’s identity (fingerprint or email) to use as a recipient to encrypt this file’s data key. Pass multiple times for multiple recipients, or omit completely and <code>gcy</code> prompts you to select a key available to your gpg agent.</li>
<li><code>--password value</code>: A password to use for encryption and decryption. To prevent your shell from remembering the password in its history, start your command with a space: <code>[space]gcy ...</code>. Can be set via the environment variable: <code>CONFIG_PASSWORD</code>.</li>
<li><code>--skip-password-validation</code>: Skips password validation, potentially making encrypted secrets easier to crack.</li>
</ul>
<div class="sourceCode" id="cb17"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1"></a><span class="ex">gcy</span> rekey config-up-there.yml</span>
<span id="cb17-2"><a href="#cb17-2"></a><span class="co"># Use the arrow keys to navigate: ↓ ↑ → ←  and / toggles search</span></span>
<span id="cb17-3"><a href="#cb17-3"></a><span class="co"># ? Select a key to continue:</span></span>
<span id="cb17-4"><a href="#cb17-4"></a><span class="co">#   ▸ arn:aws:kms:us-east-1:an-account:alias/an-alias</span></span>
<span id="cb17-5"><a href="#cb17-5"></a><span class="co">#     arn:aws:kms:us-east-1:an-account:alias/another-alias</span></span>
<span id="cb17-6"><a href="#cb17-6"></a><span class="co">#     ....</span></span>
<span id="cb17-7"><a href="#cb17-7"></a><span class="co">#     arn:aws:kms:us-east-1:an-account:alias/and-so-on</span></span>
<span id="cb17-8"><a href="#cb17-8"></a><span class="co"># ↓   arn:aws:kms:us-east-1:an-account:alias/and-so-forth</span></span>
<span id="cb17-9"><a href="#cb17-9"></a><span class="co"># ✔ arn:aws:kms:us-east-1:an-account:alias/another-alias</span></span>
<span id="cb17-10"><a href="#cb17-10"></a><span class="co"># INFO Re-encryption successful</span></span>
<span id="cb17-11"><a href="#cb17-11"></a></span>
<span id="cb17-12"><a href="#cb17-12"></a><span class="co"># or specify the key if you know it</span></span>
<span id="cb17-13"><a href="#cb17-13"></a><span class="ex">gcy</span> rekey config-up-there.yml arn:aws:kms:an-aws-region:an-account:alias/an-alias</span>
<span id="cb17-14"><a href="#cb17-14"></a></span>
<span id="cb17-15"><a href="#cb17-15"></a><span class="co"># Rekey between AWS profiles by temporarily rekeying with a password</span></span>
<span id="cb17-16"><a href="#cb17-16"></a> <span class="bu">export</span> <span class="va">CONFIG_PASSWORD=</span><span class="st">&quot;VERY-INSECURE-TEMPORARY-PASSWORD&quot;</span></span>
<span id="cb17-17"><a href="#cb17-17"></a><span class="va">AWS_PROFILE=</span>source <span class="ex">gcy</span> rekey --provider password config/file.yml</span>
<span id="cb17-18"><a href="#cb17-18"></a><span class="va">AWS_PROFILE=</span>destination <span class="ex">gcy</span> rekey --provider kms config/file.yml</span></code></pre></div>
<h3 id="shell-completion">Shell completion</h3>
<p><code>gcy</code> provides shell completion scripts for <code>bash</code> and <code>zsh</code>, which will be installed automatically by package managers. Shell completion is available for commands, options, <code>CONFIG_FILE</code> and <code>KEYPATH</code>.</p>
<hr />
<h2 id="config-files">Config files</h2>
<p>Config files are <a href="https://yaml.org/">YAML</a> files with nested objects representing a configuration tree. Storing encrypted values requires the presence of a <code>crypto</code> property with configuration for that provider, but the rest is up to you. <code>gcy</code> keeps keys ordered alphabetically, doing its best-effort to keep comments in place. Here’s a typical example of such a file, using the <code>kms</code> provider:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb18-1"><a href="#cb18-1"></a><span class="fu">crypto</span><span class="kw">:</span></span>
<span id="cb18-2"><a href="#cb18-2"></a><span class="at">  </span><span class="fu">provider</span><span class="kw">:</span><span class="at"> kms</span></span>
<span id="cb18-3"><a href="#cb18-3"></a><span class="at">  </span><span class="fu">key</span><span class="kw">:</span><span class="at"> arn:aws:kms:an-aws-region:an-account:alias/an-alias</span></span>
<span id="cb18-4"><a href="#cb18-4"></a></span>
<span id="cb18-5"><a href="#cb18-5"></a><span class="co"># and any arbitrary yaml afterwards</span></span>
<span id="cb18-6"><a href="#cb18-6"></a><span class="co"># Comments will be preserved by go-config-yourself, and all keys will be ordered</span></span>
<span id="cb18-7"><a href="#cb18-7"></a><span class="fu">someKey</span><span class="kw">:</span><span class="at"> someValue</span></span>
<span id="cb18-8"><a href="#cb18-8"></a></span>
<span id="cb18-9"><a href="#cb18-9"></a><span class="co"># Prefer nested objects over LONG_SCREAM_UNGROUPABLE_KEYNAMES</span></span>
<span id="cb18-10"><a href="#cb18-10"></a><span class="fu">someObject</span><span class="kw">:</span></span>
<span id="cb18-11"><a href="#cb18-11"></a><span class="at">  </span><span class="fu">because</span><span class="kw">:</span><span class="at"> We use the right datatypes and</span></span>
<span id="cb18-12"><a href="#cb18-12"></a><span class="at">  </span><span class="fu">wereNotCrazy</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb18-13"><a href="#cb18-13"></a><span class="at">  </span><span class="fu">verySecret</span><span class="kw">:</span></span>
<span id="cb18-14"><a href="#cb18-14"></a><span class="at">    </span><span class="fu">encrypted</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb18-15"><a href="#cb18-15"></a><span class="at">    </span><span class="fu">ciphertext</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;...base64-encoded string&quot;</span></span>
<span id="cb18-16"><a href="#cb18-16"></a><span class="at">    </span><span class="fu">hash</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;aSHA256hashOfTheSecret&quot;</span></span></code></pre></div>
<p>The recommended location for config files for projects is in the <code>config/</code> directory of a repository. A common usage pattern is to start with a <code>config/defaults.yml</code> file and then add override files for each environment the application will run in, like so:</p>
<pre><code>- your-awesome-project/
  | - config/
      | - defaults.yml
      | - staging.yml
      | - production.yml</code></pre>
<p>In the above scenario, you may store defaults or placeholders in <code>defaults.yml</code> with no encryption, while storing only the necessary secrets to override these placeholders in separate files. <code>staging.yml</code> and <code>production.yml</code> will only contain overrides to be applied on top of <code>defaults.yml</code>. <code>gcy</code> automatically adds placeholder values to <code>defaults.yml</code> after storing secrets in environment-specific files.</p>
<hr />
<h1 id="contributing-to-go-config-yourself">Contributing to <code>go-config-yourself</code></h1>
<p>See <a href="CONTRIBUTING.html">CONTRIBUTING.md</a> for details on how to start developing.</p>
</article>
</body>
</html>
